(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{168:function(e,t,n){e.exports=n(345)},188:function(e,t,n){},255:function(e,t,n){},268:function(e,t,n){},269:function(e,t,n){},276:function(e,t,n){},344:function(e,t,n){},345:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(4),o=n.n(c);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var l=n(17),u=n(74),s=n(40),i="TOGGLE_COLLAPSE",m="APP";var p=function(){var e=localStorage.getItem(m);return e?JSON.parse(e):{name:"\u540e\u53f0\u7ba1\u7406",description:"\u7edf\u4e00\u5e94\u7528\u540e\u53f0\u7ba1\u7406\u63cf\u8ff0",collapsed:!1}}(),d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p;switch((arguments.length>1?arguments[1]:void 0).type){case i:var t=Object.assign(e,{collapsed:!e.collapsed});return localStorage.setItem(m,JSON.stringify(t)),t}return Object(s.a)({},e)},h="LOGIN",f="LOGOUT",b="user";var g=function(){var e=localStorage.getItem(b);return e?JSON.parse(e):null}(),E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:var n=Object.assign(e||{},t.user);return localStorage.setItem(b,JSON.stringify(n)),n;case f:return localStorage.removeItem(b),null}return Object(s.a)({},e)},y="SET_LOADING_STATE",v={pending:!0},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:return Object.assign(e,{pending:t.pending})}return Object(s.a)({},e)},j="SET_MENUS",S="REDIRECT_ROUTE",k={menus:[],routePath:"",breadcrumbs:[]},w=function(e,t){for(var n,a=[{breadcrumbName:"\u9996\u9875",path:"/",icon:"home"}],r=function(e){e.url&&e.url===t&&(n=e)};t&&(N(e,r),!n);)t=t.split("/").slice(0,-1).join("/");if(n)for(;n;)a.splice(1,0,{breadcrumbName:n.title,path:n.url,icon:n.icon}),n=n._parent;return a};function N(e,t){!function e(n,a,r){n.forEach(function(n){t&&t(n,a,r),n.children&&e(n.children,n,r+1)})}(e,null,1)}var I=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case j:return Object.assign(t,{menus:(e=n.menus,N(e,function(e,t,n){e._level||(e._level=n),e._parent||(e._parent=t)}),e),breadcrumbs:w(n.menus,t.routePath)});case S:return Object.assign(t,{routePath:n.routePath,breadcrumbs:w(t.menus,n.routePath)})}return Object(s.a)({},t)},M="SET_PERMISSIONS",C={resources:[]},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case M:return Object.assign(e,{resources:t.resources})}return Object(s.a)({},e)},F=Object(u.b)({appState:d,userState:E,routeState:I,permissionState:P,contentState:O}),K=Object(u.c)(F),L=n(28),x=n(22),R=n(23),_=n(26),T=n(24),A=n(27),W=n(56),z=Object(l.b)(null,function(e,t){return Object.assign(t,{redirectRoute:function(t){return e(function(e){return{type:S,routePath:e}}(t))}})})(function(e){function t(){var e,n;Object(x.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(_.a)(this,(e=Object(T.a)(t)).call.apply(e,[this].concat(r)))).unsubscribeFromHistory=void 0,n.handleLocationChange=function(e){n.props.redirectRoute(e.pathname)},n}return Object(A.a)(t,e),Object(R.a)(t,[{key:"componentWillMount",value:function(){this.unsubscribeFromHistory=this.props.history.listen(this.handleLocationChange),this.handleLocationChange(this.props.history.location)}},{key:"componentWillUnmount",value:function(){this.unsubscribeFromHistory&&this.unsubscribeFromHistory()}},{key:"render",value:function(){return r.a.createElement(W.c,this.props)}}]),t}(a.Component)),D=(n(181),n(49)),J=function(e){function t(){return Object(x.a)(this,t),Object(_.a)(this,Object(T.a)(t).apply(this,arguments))}return Object(A.a)(t,e),Object(R.a)(t,[{key:"render",value:function(){return r.a.createElement(D.a,{style:{marginTop:"100px"},description:r.a.createElement("span",null,"Not Found")})}}]),t}(a.Component),G=(n(346),n(164)),H=(n(98),n(42)),U=(n(188),H.a.Content),q=function(e){function t(){return Object(x.a)(this,t),Object(_.a)(this,Object(T.a)(t).apply(this,arguments))}return Object(A.a)(t,e),Object(R.a)(t,[{key:"render",value:function(){return r.a.createElement(U,{className:"page-content"},this.props.children)}}]),t}(a.Component),B=Object(l.b)(function(e){return{breadcrumbs:e.routeState.breadcrumbs}},null)(function(e){function t(){return Object(x.a)(this,t),Object(_.a)(this,Object(T.a)(t).apply(this,arguments))}return Object(A.a)(t,e),Object(R.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(G.a,{title:"\u4eea\u8868\u76d8",breadcrumb:{routes:this.props.breadcrumbs}}),r.a.createElement(q,null,"\u6b63\u5728\u52aa\u529b\u5f00\u53d1\u4e2d..."))}}]),t}(a.Component)),V=(n(114),n(9)),$=(n(154),n(29)),Q=n(64),X=n(68),Y=n.n(X),Z=n(92),ee=(n(144),n(77)),te=n(128),ne=n.n(te),ae="http://dev.api.com",re=!0;ne.a.defaults.headers["Content-Type"]="application/json";var ce=ne.a.create();ce.interceptors.request.use(function(e){var t=e.url||"";return t.startsWith("./")||t.startsWith("https://")||t.startsWith("http://")||(t=ae+t),e},function(e){console.log(e),Promise.reject(e)}),ce.interceptors.response.use(function(e){return e},function(e){var t="\u8bf7\u6c42\u9519\u8bef",n="";return e.response&&(t="".concat(t," ").concat(e.response.status),n="\u8bf7\u6c42\u5730\u5740\uff1a".concat(e.request.responseURL)),e.message&&(n="".concat(n," \u9519\u8bef\u4fe1\u606f\uff1a").concat(e.message)),ee.a.error({title:t,content:n}),Promise.reject(e)});var oe=function(){var e=Object(Z.a)(Y.a.mark(function e(t){var n;return Y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat("/data","/menus.json?userId=").concat(t),e.abrupt("return",ce.get(n));case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),le=function(){var e=Object(Z.a)(Y.a.mark(function e(t){var n;return Y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat("/data","/resources.json?userId=").concat(t),e.abrupt("return",ce.get(n));case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),ue=(n(255),$.b.SubMenu),se=Object(l.b)(function(e){var t=e.userState,n=e.appState,a=e.routeState;return{user:t,collapsed:n.collapsed,routePath:a.routePath}},function(e,t){return Object.assign(t,{updateMenus:function(t){return e(function(e){return{type:j,menus:e}}(t))},updateResources:function(t){return e(function(e){return{type:M,resources:e}}(t))}})})(function(e){function t(){var e,n;Object(x.a)(this,t);for(var a=arguments.length,c=new Array(a),o=0;o<a;o++)c[o]=arguments[o];return(n=Object(_.a)(this,(e=Object(T.a)(t)).call.apply(e,[this].concat(c)))).state={menus:[],openMenuKeys:[],selectedMenuKeys:[]},n.onOpenChange=function(e){var t=n.state.openMenuKeys,a=e.find(function(e){return-1===t.indexOf(e)});if(a){var r;if(N(n.state.menus,function(e){e.id===a&&(r=e)}),r)for(t=[];r;)t.push(r.id),r=r._parent;n.setState({openMenuKeys:t})}else n.setState({openMenuKeys:e})},n.renderMenu=function(e){return e.map(function(e){var t=r.a.createElement("span",null,e.title);return e.icon&&(t=r.a.createElement("span",null,r.a.createElement(V.a,{type:e.icon}),t)),e.url&&(t=r.a.createElement(Q.a,{to:e.url},t)),e.children?r.a.createElement(ue,{key:e.id,title:t},n.renderMenu(e.children)):r.a.createElement($.b.Item,{key:e.id,title:e.title,disabled:e.disabled},t)})},n.updateMenuKeys=function(e,t){for(var a,r=n.state.openMenuKeys,c=n.state.selectedMenuKeys,o=function(t){t.url&&t.url===e&&(a=t)};e&&(N(n.state.menus,o),!a);)e=e.split("/").slice(0,-1).join("/");if(a)for(r=[],c=[];a;)a.children?r.push(a.id):c.push(a.id),a=a._parent;t&&(r=[]),n.setState({openMenuKeys:r,selectedMenuKeys:c})},n}return Object(A.a)(t,e),Object(R.a)(t,[{key:"componentDidMount",value:function(){this.loadLocalPermissions()}},{key:"loadLocalPermissions",value:function(){var e=this;oe(this.props.user.id).then(function(t){e.props.updateMenus(t.data),e.setState({menus:t.data})}),le(this.props.user.id).then(function(t){e.props.updateResources(t.data)})}},{key:"componentWillReceiveProps",value:function(e){this.updateMenuKeys(e.routePath,e.collapsed)}},{key:"render",value:function(){return r.a.createElement($.b,{mode:"inline",className:"menu",openKeys:this.state.openMenuKeys,selectedKeys:this.state.selectedMenuKeys,onOpenChange:this.onOpenChange},this.renderMenu(this.state.menus))}}]),t}(a.Component)),ie=(n(264),n(130)),me=(n(266),n(160)),pe=n(44),de=n.n(pe),he=(n(268),H.a.Header),fe=Object(l.b)(function(e){return{appinfo:e.appState,userinfo:e.userState}},function(e){return{toggle:function(){return e({type:i})},logout:function(){return e({type:f})}}})(function(e){function t(){var e,n;Object(x.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(_.a)(this,(e=Object(T.a)(t)).call.apply(e,[this].concat(r)))).state={isSuppourtFullscreen:de.a&&de.a.enabled,isFullscreen:!1},n}return Object(A.a)(t,e),Object(R.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.windowResize.bind(this))}},{key:"windowResize",value:function(){de.a&&de.a.enabled&&this.setState({isFullscreen:de.a.isFullscreen})}},{key:"logout",value:function(){var e=this;ee.a.confirm({title:"\u786e\u8ba4\u64cd\u4f5c",content:"\u662f\u5426\u9000\u51fa\u767b\u5f55\uff1f",onOk:function(){e.props.logout()}})}},{key:"clearLocalStorage",value:function(){ee.a.confirm({title:"\u786e\u8ba4\u64cd\u4f5c",content:"\u662f\u5426\u6e05\u9664\u672c\u5730\u7f13\u5b58\uff1f",onOk:function(){localStorage.clear()}})}},{key:"toggleFullscreen",value:function(){de.a&&de.a.enabled&&de.a.toggle()}},{key:"render",value:function(){var e=this,t=this.props,n=t.appinfo,a=t.userinfo,c=t.toggle,o=r.a.createElement($.b,null,r.a.createElement($.b.Item,{key:"0",disabled:!0},r.a.createElement("strong",null,"\u59d3\u540d\uff1a"),a.name),r.a.createElement($.b.Item,{key:"1",disabled:!0},r.a.createElement("strong",null,"\u89d2\u8272\uff1a"),a.rolename),r.a.createElement($.b.Item,{key:"2",disabled:!0},r.a.createElement("strong",null,"\u7ec4\u7ec7\uff1a"),a.organizename),r.a.createElement($.b.Divider,null),r.a.createElement($.b.Item,{key:"3",onClick:function(){return e.logout()}},"\u6ce8\u9500")),l=r.a.createElement(ie.a,{overlay:o},r.a.createElement("li",null,r.a.createElement(me.a,{size:"small",style:{backgroundColor:"#87d068"},icon:"user"}),r.a.createElement("span",{className:"user-title"},a.username))),u=r.a.createElement($.b,null,r.a.createElement($.b.Item,{key:"0",onClick:function(){return e.toggleFullscreen()}},r.a.createElement(V.a,{type:this.state.isFullscreen?"fullscreen-exit":"fullscreen"}),this.state.isFullscreen?"\u9000\u51fa\u5168\u5c4f":"\u5168\u5c4f"),r.a.createElement($.b.Item,{key:"1",onClick:function(){return e.clearLocalStorage()}},r.a.createElement(V.a,{type:"delete"})," \u6e05\u7406\u672c\u5730\u7f13\u5b58"));return r.a.createElement(he,{className:"main-header"},r.a.createElement("div",{className:"title",style:n.collapsed?{width:"79px"}:{width:"199px"}},r.a.createElement("img",{className:"logo",alt:n.name,src:"/favicon.ico"}),r.a.createElement("span",{hidden:n.collapsed},n.name)),r.a.createElement("div",{className:"bar"},r.a.createElement("ul",null,r.a.createElement("li",{onClick:function(){return c()}},r.a.createElement(V.a,{type:n.collapsed?"menu-unfold":"menu-fold"}))),r.a.createElement("ul",{style:{flex:"1"}}),r.a.createElement("ul",null,r.a.createElement(ie.a,{overlay:u},r.a.createElement("li",null,r.a.createElement(V.a,{type:"setting"}))),a.id?l:r.a.createElement(r.a.Fragment,null))))}}]),t}(a.Component)),be=(n(269),H.a.Sider),ge=Object(l.b)(function(e){return{collapsed:e.appState.collapsed}})(function(e){return r.a.createElement(H.a,null,r.a.createElement(fe,null),r.a.createElement(H.a,null,r.a.createElement(be,{className:"main-sidebar",trigger:null,collapsible:!0,collapsed:e.collapsed},r.a.createElement(se,e)),r.a.createElement(H.a,{className:"main-body"},e.children)))}),Ee=n(166),ye=Object(l.b)(function(e){var t=e.userState;return{logged:!!t&&!!t.id}})(function(e){var t=e.component,n=e.logged,a=Object(Ee.a)(e,["component","logged"]);return r.a.createElement(W.b,Object.assign({},a,{render:function(e){return n?r.a.createElement(t,e):r.a.createElement(W.a,{to:"/authorize/login"})}}))}),ve=(n(85),n(21)),Oe=(n(270),n(165)),je=(n(347),n(58)),Se=(n(274),n(129)),ke=(n(276),function(e){function t(){var e,n;Object(x.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(_.a)(this,(e=Object(T.a)(t)).call.apply(e,[this].concat(r)))).handleSubmit=function(e){e.preventDefault(),n.props.form.validateFields(function(e,t){if(!e){console.log("Received values of form: ",t);var a={id:t.userName,username:t.userName};n.props.login(a),n.props.history.push("/")}})},n}return Object(A.a)(t,e),Object(R.a)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"login-header"},r.a.createElement("div",null,r.a.createElement("img",{className:"logo",alt:"\u7edf\u4e00\u4e2d\u540e\u53f0",src:"/favicon.ico"}),r.a.createElement("span",{className:"title"},"\u7edf\u4e00\u4e2d\u540e\u53f0")),r.a.createElement("p",{className:"description"},"\u7edf\u4e00\u4e2d\u540e\u53f0\u7ba1\u7406\u7cfb\u7edf,\u7528\u4e8e\u5feb\u901f\u6784\u5efa\u540e\u53f0\u7ba1\u7406\u7cfb\u7edf\u57fa\u7840\u9879\u76ee")),r.a.createElement(je.a,{className:"login-section",onSubmit:this.handleSubmit},r.a.createElement(je.a.Item,null,e("userName",{rules:[{required:!0,message:"\u8bf7\u586b\u5199\u767b\u5f55\u7528\u6237\u540d!"}]})(r.a.createElement(Se.a,{prefix:r.a.createElement(V.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"\u7528\u6237\u540d\uff1aany"}))),r.a.createElement(je.a.Item,null,e("password",{rules:[{required:!0,message:"\u8bf7\u586b\u5199\u767b\u5f55\u5bc6\u7801!"}]})(r.a.createElement(Se.a,{prefix:r.a.createElement(V.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"\u5bc6   \u7801\uff1aany"}))),r.a.createElement(je.a.Item,null,e("remember",{valuePropName:"checked",initialValue:!0})(r.a.createElement(Oe.a,{style:{float:"left"}},"\u81ea\u52a8\u767b\u5f55")),r.a.createElement("a",{style:{float:"right"},href:"/user/forgot"},"\u5fd8\u8bb0\u5bc6\u7801 \uff1f")),r.a.createElement(je.a.Item,null,r.a.createElement(ve.a,{type:"primary",htmlType:"submit",style:{width:"100%"}},"\u767b\u5f55"),"\u6216\u8005 ",r.a.createElement("a",{href:"/user/register"},"\u7acb\u5373\u6ce8\u518c\uff01"))))}}]),t}(a.Component)),we=Object(l.b)(null,function(e){return{login:function(t){return e(function(e){return{type:h,user:e}}(t))}}})(je.a.create({name:"login"})(ke)),Ne=function(e){return e.children},Ie=Object(W.f)(function(e){return r.a.createElement(Ne,null,r.a.createElement(W.d,null,r.a.createElement(W.b,{exact:!0,path:"".concat(e.match.path,"login"),component:we})))}),Me=function(e){return r.a.createElement(ge,null,r.a.createElement(W.d,null,r.a.createElement(W.b,{exact:!0,path:e.match.path},r.a.createElement(W.a,{to:"".concat(e.match.path,"dashboard")})),r.a.createElement(W.b,{exact:!0,path:"".concat(e.match.path,"dashboard"),component:B}),r.a.createElement(W.b,{component:J})))},Ce=Object(W.f)(function(e){return r.a.createElement(W.d,null,r.a.createElement(W.b,{path:"".concat(e.match.path,"authorize/"),component:Ie}),r.a.createElement(ye,Object.assign({path:"".concat(e.match.path),component:Me},e)))});n(344);o.a.render(r.a.createElement(function(){return r.a.createElement(l.a,{store:K},r.a.createElement(z,{history:re?Object(L.b)():Object(L.a)()},r.a.createElement(Ce,null)))},null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[168,1,2]]]);
//# sourceMappingURL=main.f9803b13.chunk.js.map